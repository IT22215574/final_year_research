# ğŸ—ï¸ Smart Fisher ML Architecture

## System Architecture Diagram

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          SMART FISHER LANKA                              â”‚
â”‚                    ML-Powered Trip Cost Prediction                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         1. DATA LAYER                                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                          â”‚
â”‚  ğŸ“Š Dataset Generation (datasetgeneration.ipynb)                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚  â€¢ CEYPETCO Fuel Price Scraping                            â”‚        â”‚
â”‚  â”‚  â€¢ 5 Boat Types (IMUL, MDBT, OBFR, TKBO, NMTR)            â”‚        â”‚
â”‚  â”‚  â€¢ Realistic Parameters (75-150HP OFRP boats)             â”‚        â”‚
â”‚  â”‚  â€¢ Synthetic Data Generation (10,000+ records)            â”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”‚                            â†“                                             â”‚
â”‚  ğŸ“ Output Files:                                                        â”‚
â”‚     â€¢ smart_fisher_full_dataset.csv                                     â”‚
â”‚     â€¢ smart_fisher_train.csv                                            â”‚
â”‚     â€¢ smart_fisher_test.csv                                             â”‚
â”‚                                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      2. TRAINING LAYER                                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                          â”‚
â”‚  ğŸ¤– ML Training Pipeline (complete_ml_training_pipeline.py)             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚  STEP 1: Load Dataset (NO DATA LEAKAGE)                    â”‚        â”‚
â”‚  â”‚    â€¢ 17 Features (boat, trip, environment, location)       â”‚        â”‚
â”‚  â”‚    â€¢ 4 Targets (fuel, ice, water, total costs)             â”‚        â”‚
â”‚  â”‚                                                              â”‚        â”‚
â”‚  â”‚  STEP 2: Preprocessing                                      â”‚        â”‚
â”‚  â”‚    â€¢ StandardScaler (numerical)                             â”‚        â”‚
â”‚  â”‚    â€¢ OneHotEncoder (categorical)                            â”‚        â”‚
â”‚  â”‚    â€¢ Train/Test Split (80/20)                               â”‚        â”‚
â”‚  â”‚                                                              â”‚        â”‚
â”‚  â”‚  STEP 3: Model Training                                     â”‚        â”‚
â”‚  â”‚    â”œâ”€ Random Forest (MultiOutput)                           â”‚        â”‚
â”‚  â”‚    â”œâ”€ XGBoost (MultiOutput)                                â”‚        â”‚
â”‚  â”‚    â”œâ”€ Gradient Boosting (MultiOutput)                      â”‚        â”‚
â”‚  â”‚    â”œâ”€ Ridge Regression                                     â”‚        â”‚
â”‚  â”‚    â””â”€ Lasso Regression                                     â”‚        â”‚
â”‚  â”‚                                                              â”‚        â”‚
â”‚  â”‚  STEP 4: Evaluation                                         â”‚        â”‚
â”‚  â”‚    â€¢ RÂ² Score (85-92% target)                              â”‚        â”‚
â”‚  â”‚    â€¢ SMAPE (8-12% target)                                  â”‚        â”‚
â”‚  â”‚    â€¢ Overfitting Detection (RÂ² gap < 0.05)                 â”‚        â”‚
â”‚  â”‚                                                              â”‚        â”‚
â”‚  â”‚  STEP 5: Model Selection                                    â”‚        â”‚
â”‚  â”‚    â€¢ Balanced Score (70% RÂ², 20% SMAPE, 10% overfitting)  â”‚        â”‚
â”‚  â”‚    â€¢ Best Model: Random Forest / XGBoost                   â”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”‚                            â†“                                             â”‚
â”‚  ğŸ“¦ Output Files (production_model/):                                   â”‚
â”‚     â€¢ trip_cost_predictor.pkl (trained model)                           â”‚
â”‚     â€¢ model_metadata.json (performance metrics)                         â”‚
â”‚     â€¢ all_model_results.json (comparison)                               â”‚
â”‚                                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    3. PREDICTION LAYER                                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                          â”‚
â”‚  ğŸ”® Production Predictor (production_predictor.py)                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚  class TripCostPredictor:                                   â”‚        â”‚
â”‚  â”‚                                                              â”‚        â”‚
â”‚  â”‚    def __init__(model_path, metadata_path)                  â”‚        â”‚
â”‚  â”‚      â€¢ Load trained model                                   â”‚        â”‚
â”‚  â”‚      â€¢ Load metadata                                        â”‚        â”‚
â”‚  â”‚      â€¢ Initialize feature info                              â”‚        â”‚
â”‚  â”‚                                                              â”‚        â”‚
â”‚  â”‚    def prepare_input(trip_data)                             â”‚        â”‚
â”‚  â”‚      â€¢ Validate input                                       â”‚        â”‚
â”‚  â”‚      â€¢ Fill missing values with defaults                    â”‚        â”‚
â”‚  â”‚      â€¢ Return DataFrame                                     â”‚        â”‚
â”‚  â”‚                                                              â”‚        â”‚
â”‚  â”‚    def predict(trip_data, include_confidence)               â”‚        â”‚
â”‚  â”‚      â€¢ Prepare input                                        â”‚        â”‚
â”‚  â”‚      â€¢ Make prediction                                      â”‚        â”‚
â”‚  â”‚      â€¢ Calculate confidence intervals (SMAPE-based)         â”‚        â”‚
â”‚  â”‚      â€¢ Return result with metadata                          â”‚        â”‚
â”‚  â”‚                                                              â”‚        â”‚
â”‚  â”‚    def predict_batch(trips_data)                            â”‚        â”‚
â”‚  â”‚      â€¢ Process multiple trips efficiently                   â”‚        â”‚
â”‚  â”‚      â€¢ Return list of predictions                           â”‚        â”‚
â”‚  â”‚                                                              â”‚        â”‚
â”‚  â”‚    def get_model_info()                                     â”‚        â”‚
â”‚  â”‚      â€¢ Return model metadata                                â”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”‚                                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      4. API LAYER (Flask)                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                          â”‚
â”‚  ğŸŒ ML Service (ml_service.py) - Port 5000                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚  Flask REST API                                             â”‚        â”‚
â”‚  â”‚                                                              â”‚        â”‚
â”‚  â”‚  GET  /health                                               â”‚        â”‚
â”‚  â”‚    â€¢ Health check endpoint                                  â”‚        â”‚
â”‚  â”‚    â€¢ Returns service status                                 â”‚        â”‚
â”‚  â”‚                                                              â”‚        â”‚
â”‚  â”‚  GET  /model/info                                           â”‚        â”‚
â”‚  â”‚    â€¢ Get model metadata                                     â”‚        â”‚
â”‚  â”‚    â€¢ Returns performance metrics                            â”‚        â”‚
â”‚  â”‚                                                              â”‚        â”‚
â”‚  â”‚  POST /predict                                              â”‚        â”‚
â”‚  â”‚    â€¢ Single trip prediction                                 â”‚        â”‚
â”‚  â”‚    â€¢ Input: 17 feature values                               â”‚        â”‚
â”‚  â”‚    â€¢ Output: 4 cost predictions + confidence intervals      â”‚        â”‚
â”‚  â”‚                                                              â”‚        â”‚
â”‚  â”‚  POST /predict/batch                                        â”‚        â”‚
â”‚  â”‚    â€¢ Batch trip prediction                                  â”‚        â”‚
â”‚  â”‚    â€¢ Input: Array of trip data                              â”‚        â”‚
â”‚  â”‚    â€¢ Output: Array of predictions                           â”‚        â”‚
â”‚  â”‚                                                              â”‚        â”‚
â”‚  â”‚  Features:                                                   â”‚        â”‚
â”‚  â”‚    â€¢ CORS enabled                                           â”‚        â”‚
â”‚  â”‚    â€¢ JSON request/response                                  â”‚        â”‚
â”‚  â”‚    â€¢ Error handling                                         â”‚        â”‚
â”‚  â”‚    â€¢ Request validation                                     â”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”‚                                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   5. INTEGRATION LAYER (NestJS)                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                          â”‚
â”‚  ğŸ¢ Backend Integration (Backend/src/ml-prediction/)                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚  ml-prediction.module.ts                                    â”‚        â”‚
â”‚  â”‚    â€¢ NestJS module definition                               â”‚        â”‚
â”‚  â”‚    â€¢ Exports service for other modules                      â”‚        â”‚
â”‚  â”‚                                                              â”‚        â”‚
â”‚  â”‚  ml-prediction.service.ts                                   â”‚        â”‚
â”‚  â”‚    â€¢ Axios HTTP client (â†’ Flask ML Service)                â”‚        â”‚
â”‚  â”‚    â€¢ checkHealth(): Health check                            â”‚        â”‚
â”‚  â”‚    â€¢ getModelInfo(): Get model metadata                     â”‚        â”‚
â”‚  â”‚    â€¢ predictTripCost(): Single prediction                   â”‚        â”‚
â”‚  â”‚    â€¢ predictBatchTripCosts(): Batch prediction              â”‚        â”‚
â”‚  â”‚    â€¢ createPredictionInput(): Helper for simplified input   â”‚        â”‚
â”‚  â”‚                                                              â”‚        â”‚
â”‚  â”‚  ml-prediction.controller.ts                                â”‚        â”‚
â”‚  â”‚    â€¢ REST API endpoints:                                    â”‚        â”‚
â”‚  â”‚      GET  /api/ml-prediction/health                         â”‚        â”‚
â”‚  â”‚      GET  /api/ml-prediction/model-info                     â”‚        â”‚
â”‚  â”‚      POST /api/ml-prediction/predict                        â”‚        â”‚
â”‚  â”‚      POST /api/ml-prediction/predict/batch                  â”‚        â”‚
â”‚  â”‚      POST /api/ml-prediction/predict-simple                 â”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”‚                                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     6. APPLICATION LAYER                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                          â”‚
â”‚  ğŸ“± Mobile App (React Native)                                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚  â€¢ User inputs trip details                                 â”‚        â”‚
â”‚  â”‚  â€¢ Calls NestJS API                                         â”‚        â”‚
â”‚  â”‚  â€¢ Displays predicted costs                                 â”‚        â”‚
â”‚  â”‚  â€¢ Shows confidence intervals                               â”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”‚                                                                          â”‚
â”‚  ğŸŒ Web App (Optional)                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚  â€¢ Admin dashboard                                          â”‚        â”‚
â”‚  â”‚  â€¢ Bulk predictions                                         â”‚        â”‚
â”‚  â”‚  â€¢ Model performance monitoring                             â”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”‚                                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Data Flow Example

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        REQUEST FLOW                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

User Input (Mobile)
  â”‚
  â”‚  {
  â”‚    "boatType": "IMUL",
  â”‚    "tripDays": 1,
  â”‚    "distanceKm": 50,
  â”‚    "crewSize": 3
  â”‚  }
  â”‚
  â†“
NestJS Controller
  â”‚  POST /api/ml-prediction/predict-simple
  â”‚
  â†“
NestJS Service
  â”‚  createPredictionInput()
  â”‚  â†’ Expands to 17 features
  â”‚
  â”‚  {
  â”‚    "boat_type": "IMUL",
  â”‚    "engine_hp": 75,
  â”‚    "fuel_type": "Diesel",
  â”‚    "crew_size": 3,
  â”‚    "ice_capacity_kg": 200,
  â”‚    "water_capacity_L": 100,
  â”‚    "avg_speed_kmh": 12.0,
  â”‚    "trip_days": 1,
  â”‚    "trip_month": 3,
  â”‚    "distance_km": 50,
  â”‚    "wind_kph": 15,
  â”‚    "wave_height_m": 1.0,
  â”‚    "weather_factor": 1.0,
  â”‚    "region": "West",
  â”‚    "is_multi_day": false,
  â”‚    "has_engine": true,
  â”‚    "is_deep_sea": false
  â”‚  }
  â”‚
  â†“
HTTP Request (Axios)
  â”‚  POST http://localhost:5000/predict
  â”‚  Content-Type: application/json
  â”‚
  â†“
Flask ML Service
  â”‚  /predict endpoint
  â”‚  Validates input
  â”‚
  â†“
Production Predictor
  â”‚  TripCostPredictor.predict()
  â”‚  â€¢ prepare_input()
  â”‚  â€¢ model.predict()
  â”‚  â€¢ calculate confidence intervals
  â”‚
  â†“
Trained Model
  â”‚  trip_cost_predictor.pkl
  â”‚  RandomForest MultiOutputRegressor
  â”‚  â€¢ Preprocessing (scaling, encoding)
  â”‚  â€¢ Prediction (4 targets)
  â”‚
  â†“
Predictions
  â”‚
  â”‚  {
  â”‚    "predictions": {
  â”‚      "fuel_cost_lkr": 15234.56,
  â”‚      "ice_cost_lkr": 2400.00,
  â”‚      "water_cost_lkr": 500.00,
  â”‚      "total_base_cost_lkr": 18134.56
  â”‚    },
  â”‚    "confidence_intervals": {
  â”‚      "fuel_cost_lkr": {
  â”‚        "lower": 13500.00,
  â”‚        "upper": 17000.00,
  â”‚        "confidence_level": 0.68
  â”‚      },
  â”‚      "total_base_cost_lkr": {
  â”‚        "lower": 16000.00,
  â”‚        "upper": 20000.00,
  â”‚        "confidence_level": 0.68
  â”‚      }
  â”‚    },
  â”‚    "model_info": {
  â”‚      "model_name": "Random Forest",
  â”‚      "model_r2": 0.8750,
  â”‚      "model_smape": 8.45,
  â”‚      "version": "1.0.0"
  â”‚    }
  â”‚  }
  â”‚
  â†“
HTTP Response
  â”‚  Status: 200 OK
  â”‚  Content-Type: application/json
  â”‚
  â†“
NestJS Service
  â”‚  Receives prediction
  â”‚  Logs result
  â”‚
  â†“
NestJS Controller
  â”‚  Formats response
  â”‚  {
  â”‚    "status": "success",
  â”‚    "data": { ...predictions... }
  â”‚  }
  â”‚
  â†“
Mobile App
  â”‚  Displays results to user
  â”‚
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚  Trip Cost Estimate                     â”‚
  â”‚                                         â”‚
  â”‚  Fuel:       LKR 15,234.56             â”‚
  â”‚  Ice:        LKR  2,400.00             â”‚
  â”‚  Water:      LKR    500.00             â”‚
  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€           â”‚
  â”‚  Total:      LKR 18,134.56             â”‚
  â”‚                                         â”‚
  â”‚  Confidence: LKR 16,000 - 20,000       â”‚
  â”‚                                         â”‚
  â”‚  [Plan Trip]                            â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Technology Stack

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        TECHNOLOGY STACK                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                     â”‚
â”‚  DATA & ML                                                          â”‚
â”‚  â”œâ”€ Python 3.8+                                                    â”‚
â”‚  â”œâ”€ pandas (data manipulation)                                     â”‚
â”‚  â”œâ”€ numpy (numerical computing)                                    â”‚
â”‚  â”œâ”€ scikit-learn (ML algorithms)                                   â”‚
â”‚  â”œâ”€ XGBoost (gradient boosting)                                    â”‚
â”‚  â”œâ”€ joblib (model persistence)                                     â”‚
â”‚  â””â”€ Jupyter (development)                                          â”‚
â”‚                                                                     â”‚
â”‚  API LAYER                                                          â”‚
â”‚  â”œâ”€ Flask 2.3+ (REST API)                                          â”‚
â”‚  â”œâ”€ Flask-CORS (cross-origin)                                      â”‚
â”‚  â””â”€ Requests (HTTP client)                                         â”‚
â”‚                                                                     â”‚
â”‚  BACKEND                                                            â”‚
â”‚  â”œâ”€ NestJS (Node.js framework)                                     â”‚
â”‚  â”œâ”€ TypeScript (type safety)                                       â”‚
â”‚  â”œâ”€ Axios (HTTP client)                                            â”‚
â”‚  â””â”€ MongoDB (database)                                             â”‚
â”‚                                                                     â”‚
â”‚  FRONTEND                                                           â”‚
â”‚  â”œâ”€ React Native (mobile)                                          â”‚
â”‚  â”œâ”€ Expo (development)                                             â”‚
â”‚  â””â”€ TypeScript (type safety)                                       â”‚
â”‚                                                                     â”‚
â”‚  DEPLOYMENT                                                         â”‚
â”‚  â”œâ”€ Docker (containerization)                                      â”‚
â”‚  â”œâ”€ Nginx (reverse proxy)                                          â”‚
â”‚  â””â”€ PM2 (process management)                                       â”‚
â”‚                                                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Performance Characteristics

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     PERFORMANCE METRICS                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                     â”‚
â”‚  MODEL PERFORMANCE                                                  â”‚
â”‚  â”œâ”€ Training Time:      ~2 minutes (10,000 records)               â”‚
â”‚  â”œâ”€ Model RÂ²:           85-92% (excellent)                         â”‚
â”‚  â”œâ”€ SMAPE:              8-12% (robust)                             â”‚
â”‚  â”œâ”€ RMSE:               LKR 2,000-3,500                            â”‚
â”‚  â””â”€ Overfitting Gap:    <5% (good generalization)                  â”‚
â”‚                                                                     â”‚
â”‚  API PERFORMANCE                                                    â”‚
â”‚  â”œâ”€ Single Prediction:  <100ms                                     â”‚
â”‚  â”œâ”€ Batch (10 trips):   <200ms                                     â”‚
â”‚  â”œâ”€ Health Check:       <10ms                                      â”‚
â”‚  â””â”€ Model Info:         <20ms                                      â”‚
â”‚                                                                     â”‚
â”‚  RESOURCE USAGE                                                     â”‚
â”‚  â”œâ”€ Model Size:         ~50MB (compressed)                         â”‚
â”‚  â”œâ”€ Memory (loaded):    ~500MB                                     â”‚
â”‚  â”œâ”€ CPU Usage:          <5% (idle), 20-30% (predicting)           â”‚
â”‚  â””â”€ Throughput:         ~100 predictions/second                    â”‚
â”‚                                                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Deployment Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        PRODUCTION DEPLOYMENT                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

                            Internet
                               â”‚
                               â†“
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚   Load Balancer      â”‚
                    â”‚   (Nginx / AWS ALB)  â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
               â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
               â†“                               â†“
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  NestJS Backend  â”‚            â”‚  NestJS Backend  â”‚
    â”‚  Instance 1      â”‚            â”‚  Instance 2      â”‚
    â”‚  Port 3000       â”‚            â”‚  Port 3001       â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚                               â”‚
               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â†“
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚   ML Service Pool    â”‚
                    â”‚   (Flask)            â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
               â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
               â†“                               â†“
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  ML Service 1    â”‚            â”‚  ML Service 2    â”‚
    â”‚  Port 5000       â”‚            â”‚  Port 5001       â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚                               â”‚
               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â†“
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚   Shared Storage     â”‚
                    â”‚   (Model Files)      â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚   MongoDB            â”‚
                    â”‚   (Trip History)     â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Security Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        SECURITY LAYERS                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                     â”‚
â”‚  1. API GATEWAY LAYER                                              â”‚
â”‚     â”œâ”€ HTTPS/TLS encryption                                        â”‚
â”‚     â”œâ”€ Rate limiting (100 req/min per user)                        â”‚
â”‚     â”œâ”€ API key authentication                                      â”‚
â”‚     â””â”€ Request validation                                          â”‚
â”‚                                                                     â”‚
â”‚  2. APPLICATION LAYER                                              â”‚
â”‚     â”œâ”€ JWT authentication                                          â”‚
â”‚     â”œâ”€ Role-based access control                                   â”‚
â”‚     â”œâ”€ Input sanitization                                          â”‚
â”‚     â””â”€ Error message sanitization                                  â”‚
â”‚                                                                     â”‚
â”‚  3. ML SERVICE LAYER                                               â”‚
â”‚     â”œâ”€ Internal network only                                       â”‚
â”‚     â”œâ”€ API key validation                                          â”‚
â”‚     â”œâ”€ Input validation (17 features)                              â”‚
â”‚     â””â”€ Resource limits (timeout, memory)                           â”‚
â”‚                                                                     â”‚
â”‚  4. DATA LAYER                                                     â”‚
â”‚     â”œâ”€ MongoDB authentication                                      â”‚
â”‚     â”œâ”€ Encrypted connections                                       â”‚
â”‚     â”œâ”€ Read-only model files                                       â”‚
â”‚     â””â”€ Audit logging                                               â”‚
â”‚                                                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Monitoring & Logging

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     MONITORING DASHBOARD                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                     â”‚
â”‚  METRICS TO TRACK                                                   â”‚
â”‚  â”œâ”€ Prediction Latency (p50, p95, p99)                            â”‚
â”‚  â”œâ”€ Error Rate (%)                                                 â”‚
â”‚  â”œâ”€ Throughput (predictions/second)                                â”‚
â”‚  â”œâ”€ Model Accuracy (rolling RÂ², SMAPE)                            â”‚
â”‚  â”œâ”€ Resource Usage (CPU, Memory, Disk)                            â”‚
â”‚  â””â”€ API Response Times                                             â”‚
â”‚                                                                     â”‚
â”‚  ALERTS                                                             â”‚
â”‚  â”œâ”€ Prediction latency > 1s                                        â”‚
â”‚  â”œâ”€ Error rate > 1%                                                â”‚
â”‚  â”œâ”€ Model accuracy drop > 5%                                       â”‚
â”‚  â”œâ”€ Memory usage > 80%                                             â”‚
â”‚  â””â”€ API unavailable (health check failed)                          â”‚
â”‚                                                                     â”‚
â”‚  LOGGING                                                            â”‚
â”‚  â”œâ”€ All predictions (input, output, timestamp)                     â”‚
â”‚  â”œâ”€ Errors (stacktrace, context)                                   â”‚
â”‚  â”œâ”€ Performance metrics (timing)                                    â”‚
â”‚  â””â”€ Model retraining events                                        â”‚
â”‚                                                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

**Version**: 1.0.0  
**Last Updated**: 2024  
**Architecture Type**: Microservices with ML Integration  
**Deployment Model**: Containerized (Docker) + Load Balanced
